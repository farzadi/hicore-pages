<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Match | Hicore</title>
    <meta name="generator" content="VuePress 1.9.2">
    
    <meta name="description" content="Hicore is a free and open-source game server">
    
    <link rel="preload" href="/assets/css/0.styles.4d7381c3.css" as="style"><link rel="preload" href="/assets/js/app.358948ac.js" as="script"><link rel="preload" href="/assets/js/2.81f70962.js" as="script"><link rel="preload" href="/assets/js/13.a3d3caba.js" as="script"><link rel="prefetch" href="/assets/js/10.45c2159b.js"><link rel="prefetch" href="/assets/js/11.d4365156.js"><link rel="prefetch" href="/assets/js/12.b3220055.js"><link rel="prefetch" href="/assets/js/14.762a241b.js"><link rel="prefetch" href="/assets/js/15.fcaaa7bf.js"><link rel="prefetch" href="/assets/js/16.b9eeb876.js"><link rel="prefetch" href="/assets/js/17.c9fe4f2b.js"><link rel="prefetch" href="/assets/js/18.bbfdf67a.js"><link rel="prefetch" href="/assets/js/19.0afe7181.js"><link rel="prefetch" href="/assets/js/3.d93723c2.js"><link rel="prefetch" href="/assets/js/4.709b5100.js"><link rel="prefetch" href="/assets/js/5.1959a969.js"><link rel="prefetch" href="/assets/js/6.424d2620.js"><link rel="prefetch" href="/assets/js/7.8ba7d782.js"><link rel="prefetch" href="/assets/js/8.af999e89.js"><link rel="prefetch" href="/assets/js/9.824fd07a.js">
    <link rel="stylesheet" href="/assets/css/0.styles.4d7381c3.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="./appIcon.png" alt="Hicore" class="logo"> <span class="site-name can-hide">Hicore</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/installation/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://github.com/hicore" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/installation/" class="nav-link">
  Guide
</a></div><div class="nav-item"><a href="https://github.com/hicore" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/installation/" class="sidebar-link">Installation</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Unity3D Client</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/unity/" class="sidebar-link">Add Client To Project</a></li><li><a href="/authentication/" class="sidebar-link">Authentication</a></li><li><a href="/user-account/" class="sidebar-link">User account</a></li><li><a href="/social/" class="sidebar-link">Social</a></li><li><a href="/matchmaking/" class="sidebar-link">Matchmaking</a></li><li><a href="/storage/" class="sidebar-link">Storage</a></li><li><a href="/staticsStorage/" class="sidebar-link">Statics Storage</a></li><li><a href="/match/" aria-current="page" class="active sidebar-link">Match</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/match/#send-package" class="sidebar-link">Send Package</a></li><li class="sidebar-sub-header"><a href="/match/#onreceivepacket-event" class="sidebar-link">OnReceivePacket Event</a></li><li class="sidebar-sub-header"><a href="/match/#save-match-data" class="sidebar-link">Save Match Data</a></li><li class="sidebar-sub-header"><a href="/match/#send-match-state" class="sidebar-link">Send Match State</a></li><li class="sidebar-sub-header"><a href="/match/#check-match-status" class="sidebar-link">Check Match Status</a></li><li class="sidebar-sub-header"><a href="/match/#join-to-match" class="sidebar-link">Join To Match</a></li><li class="sidebar-sub-header"><a href="/match/#leave-match" class="sidebar-link">Leave Match</a></li><li class="sidebar-sub-header"><a href="/match/#onend-event" class="sidebar-link">OnEnd Event</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Unreal Client</span> <!----></p> <!----></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Dashboard</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/dashboard-install/" class="sidebar-link">Installing Dashboard</a></li><li><a href="/dashboard-analyses/" class="sidebar-link">Analyser</a></li><li><a href="/dashboard-game-controller/" class="sidebar-link">Game Controller</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Advanced</span> <!----></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="match"><a href="#match" class="header-anchor">#</a> Match</h1> <p>All the stuff are controlled by the mothership server which is base on TCP but all data in the matchs are controlled by the child server. All communications inside a match is based on RUDP protocol. RUDP is much faster than the TCP, and it's excellent for Fast-paced like FPS games and MMO games.</p> <h2 id="send-package"><a href="#send-package" class="header-anchor">#</a> Send Package</h2> <p>For sending data you should use <code>SendReliableData</code> method and data should be json.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    <span class="token class-name">JSONObject</span> dataJson <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataJson<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;matchId&quot;</span><span class="token punctuation">,</span> matchId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataJson<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;userId&quot;</span> <span class="token punctuation">,</span> userId<span class="token punctuation">)</span><span class="token punctuation">;</span>
    dataJson<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;matchData&quot;</span><span class="token punctuation">,</span> _vector3<span class="token punctuation">.</span><span class="token function">ToString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    client<span class="token punctuation">.</span>ChildServer<span class="token punctuation">.</span><span class="token function">SendReliableData</span><span class="token punctuation">(</span>dataJson<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p><code>matchId</code> and <code>userId</code> is required in each packet.</p></div> <h2 id="onreceivepacket-event"><a href="#onreceivepacket-event" class="header-anchor">#</a> OnReceivePacket Event</h2> <p>You can receive other players match data in this event.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    client<span class="token punctuation">.</span>ChildServer<span class="token punctuation">.</span>OnReceivePacket <span class="token operator">=</span> <span class="token punctuation">(</span>data<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        <span class="token class-name">JSONNode</span> jsonRes <span class="token operator">=</span> JSON<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>jsonRes<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="save-match-data"><a href="#save-match-data" class="header-anchor">#</a> Save Match Data</h2> <p>You can save the important state of the match in the child server. We want to use this information when some users have a problem joining the game or their connection has a problem. After they request to join the match we give them this information. Here we need id for objects, this id can be user id or other objects in the game. For example, we can save the user's cloth or their weapons or the last position of that user.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    <span class="token class-name">JSONObject</span> json <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">JSONObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    json<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;code&quot;</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    json<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;position&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;xyz&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    json<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;weapon&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wid_1&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    json<span class="token punctuation">.</span><span class="token function">Add</span><span class="token punctuation">(</span><span class="token string">&quot;set&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;sid_3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    client<span class="token punctuation">.</span>ChildServer<span class="token punctuation">.</span><span class="token function">SaveMatchData</span><span class="token punctuation">(</span>matchId<span class="token punctuation">,</span> anyId<span class="token punctuation">,</span> json<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="send-match-state"><a href="#send-match-state" class="header-anchor">#</a> Send Match State</h2> <p>We need some rules for implementing the end of the match. We use these rules to figure out how should we finish the match. All rules must be set in the dashboard, The rule must have <code>matchMode</code>, <code>key</code>, and <code>value</code>. If we want to determine the winner we should send data to the server. The data contains <code>action</code> and <code>team</code> . For example, we have a rule like if a player killed 10 players we consider that player as a winner. Each time player killed a player we send that data to the server by <code>SendMatchState</code> method. The result will appear in <code>OnEnd</code> event</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    client<span class="token punctuation">.</span>ChildServer<span class="token punctuation">.</span><span class="token function">SendMatchState</span><span class="token punctuation">(</span>matchId<span class="token punctuation">,</span> userId<span class="token punctuation">,</span> userTeam<span class="token punctuation">,</span> action<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>If we have a Free For All match we consider a player as a winner if our match is a Team Deathmatch we consider that team as the winner.</p> <div class="custom-block warning"><p class="custom-block-title">WARNING</p> <p>The action must be float or string</p></div> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>In some matches, we can set a rule like if a player destroyed an enemy base, we consider that player or team as the winner. In that case we can set the rule as string ID in the dashboard and send string action to the server from client.</p></div> <h2 id="check-match-status"><a href="#check-match-status" class="header-anchor">#</a> Check Match Status</h2> <p>If the user left the game for any reason and wants to join again we can check if the match is in progress or not and then the user can join the game. We just need to send match ID to the server.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    client<span class="token punctuation">.</span>MatchController<span class="token punctuation">.</span><span class="token function">IsMatchInProgressStatus</span><span class="token punctuation">(</span>matchId<span class="token punctuation">,</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
        <span class="token punctuation">{</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>Message <span class="token operator">+</span> <span class="token string">&quot; &quot;</span> <span class="token operator">+</span> res<span class="token punctuation">.</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="join-to-match"><a href="#join-to-match" class="header-anchor">#</a> Join To Match</h2> <p>Users can join the match by knowing the match id and using <code>JoinToMatch</code> method. After the user joined to the match server send all match data in response.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    client<span class="token punctuation">.</span>MatchController<span class="token punctuation">.</span><span class="token function">JoinToMatch</span><span class="token punctuation">(</span>matchId<span class="token punctuation">,</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>Data<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="leave-match"><a href="#leave-match" class="header-anchor">#</a> Leave Match</h2> <p>User can leave match by using <code>LeaveMatch</code> method.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    client<span class="token punctuation">.</span>MatchController<span class="token punctuation">.</span><span class="token function">LeaveMatch</span><span class="token punctuation">(</span>matchId<span class="token punctuation">,</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span> Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><h2 id="onend-event"><a href="#onend-event" class="header-anchor">#</a> OnEnd Event</h2> <p>After the match is ended, we receive the end message.</p> <div class="language-csharp extra-class"><pre class="language-csharp"><code>    client<span class="token punctuation">.</span>MatchController<span class="token punctuation">.</span>OnEnd <span class="token operator">=</span> <span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token operator">=&gt;</span>
    <span class="token punctuation">{</span>
        Debug<span class="token punctuation">.</span><span class="token function">Log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>Message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/staticsStorage/" class="prev">
        Statics Storage
      </a></span> <span class="next"><a href="/dashboard-install/">
        Installing Dashboard
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.358948ac.js" defer></script><script src="/assets/js/2.81f70962.js" defer></script><script src="/assets/js/13.a3d3caba.js" defer></script>
  </body>
</html>
